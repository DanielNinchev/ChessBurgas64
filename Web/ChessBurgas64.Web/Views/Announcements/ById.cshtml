@using ChessBurgas64.Common
@model ChessBurgas64.Web.ViewModels.Announcements.SingleAnnouncementViewModel
@{ 
    this.ViewData["Title"] = Model.Title;
}

<main>
    <div class="bg-dark text-center border">
        <h3 class="text-white title-container">@Model.Title</h3>
        <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
            <ol class="carousel-indicators">
                <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
                <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
                <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
            </ol>
            <div class="carousel-inner">
                <div class="carousel-item active">
                    <img class="d-block carousel-image rounded mx-auto" src="@Model.MainImageUrl" alt="Заглавна снимка">
                </div>
                @foreach (var image in this.Model.Images)
                {
                    <div class="carousel-item">
                        <img class="d-block carousel-image rounded mx-auto" src="@image.ImageUrl" alt="Снимка">
                    </div>
                }
            </div>
            <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="false"></span>
                <span class="sr-only">@GlobalConstants.Previous</span>
            </a>
            <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="false"></span>
                <span class="sr-only">@GlobalConstants.Next</span>
            </a>
        </div>
        <div class="container-fluid text-white position-relative">
            <div class="announcement-property-container position-absolute top-0 start-0 px-3 py-1 border">Публикувано: @Model.Date.ToShortDateString()</div>
            <div class="announcement-property-container position-absolute top-0 start-50 px-3 py-1 translate-middle-x border">Автор: Даниел Нинчев</div>
            <div class="announcement-property-container position-absolute top-0 end-0 px-3 py-1 border">Категория: @Model.CategoryName</div>
        </div>
    </div>
    <div class="bg-light mt-5 px-3 py-1 border border-danger border-5">
        <p class="text-justify">
            @Model.Text;
        </p>
    </div>

    @if (this.User.IsInRole(GlobalConstants.AdministratorRoleName))
    {
        <div class="container-fluid text-white position-relative" style="height: 30px;">
            <a class="text-white mb-5 position-absolute top-0 start-0 border px-2 py-1 background-dragon-red" asp-action="Edit" asp-route-id="@Model.Id">Обнови</a>
            <form method="post" asp-action="Delete" id="deleteForm" asp-route-id="@Model.Id">
            </form>
            <button class="btn btn-primary text-white mb-5 position-absolute top-0 end-0 border px-2 py-1" data-toggle="modal" data-target="#deleteModal">Изтрий</button>
        </div>
    }

    <div class="modal" tabindex="-1" role="dialog" id="deleteModal">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-body">
                    <p>Наистина ли искате да изтриете тази публикация?</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" onclick="deleteForm.submit()">Да</button>
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Не</button>
                </div>
            </div>
        </div>
    </div>
</main>
